var Experience=function e(){var e={},t=0,n=$("#content"),o,i,a=18,r=[0,0,0,15,0,15,15,10,15,15,15,15,20,20,10,25,15,15],c,s;return e.init=function(){e.goToStage(0),$(".next").click(function(){e.nextStage()}),$(".back").click(function(){e.prevStage()}),$(document).keydown(function(t){return 37===t.keyCode?(e.prevStage(),!1):void 0}),$(document).keydown(function(t){return 39===t.keyCode?(e.nextStage(),!1):void 0})},e.reset=function(){c="",i=null,e.goToStage(0)},e.setUserQuote=function(e){c=e},e.getUserQuote=function(){return c},e.getImage=function(){return i},e.getSlideTime=function(){var e=1e3*r[t];return console.log(e+" m/seconds for slide number "+t),e},e.goToStage=function(e){var o=e;n.transition({opacity:"0"},300,"easeInSine").promise().done(function(){"undefined"!=typeof slideTimer&&clearInterval(slideTimer),n.load("stages/"+e+".php",function(){console.log("loading "+e+".php"),n.transition({opacity:"1"},300,"easeInSine")})}),t=o},e.nextStage=function(){console.log("next"),console.log("current stage; "+t);var n=t+1;console.log("new stage; "+n),e.goToStage(n)},e.prevStage=function(){e.goToStage(t-1)},e.getCurrentStage=function(){return t},e.photoInit=function(){function e(e){video.src=window.URL.createObjectURL(e),localMediaStream=e}function t(e){console.log(e)}video.addEventListener("click",snapshot,!1),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,navigator.getUserMedia&&navigator.getUserMedia(hdConstraints,e,t)},e.startCountdown=function(){var t=3;o=setInterval(function(){$(".number").transition({scale:1,opacity:1},0),$(".countdown-container").css({opacity:1}),0===t&&(e.stopCountdown(),e.takePhoto(),e.showPreview()),console.log(t),$(".number").html(t),$(".number").transition({scale:0,opacity:0},1e3).promise().done(function(){}),t-=1},1e3)},e.takePhoto=function(){localMediaStream&&(ctx.drawImage(video,0,0),i=canvas.toDataURL("image/png"),console.log(i))},e.showPreview=function(){$(".photo-preview").css({opacity:0}),$(".confirm-panel").show()},e.stopCountdown=function(){$(".countdown-container").css({opacity:0}),clearInterval(o)},e.initTwitter=function(){s=new Codebird,s.setConsumerKey("7xo2EFvYpSWzikksZsF4CRKng","DVhyzG4eOt4Y1t8nVDtyCgRMt7lX9meYXVYqOFWwu2oz2miwd9")},e.twitterAuth=function(e){s.__call("oauth_accessToken",{oauth_verifier:e},function(e){s.setToken(e.oauth_token,e.oauth_token_secret),console.log(e)})},e.sendTweet=function(){var t=e.getImage(),n="#changemymind "+e.getUserQuote(),o=t.substring("data:image/png;base64,".length),i=o;s=new Codebird,s.setConsumerKey("7xo2EFvYpSWzikksZsF4CRKng","DVhyzG4eOt4Y1t8nVDtyCgRMt7lX9meYXVYqOFWwu2oz2miwd9");var a={status:n,"media[]":i};console.log(i),console.log(n),console.log(a),s.setToken("2680975027-H7GNoL9Y4wXmluRYTPmnmCthBo3stxXr9Wq7E8h","k4bBjEbVGuYD6IXSh848kckW2WcTV46HBtWcP623jquSw"),s.__call("statuses_updateWithMedia",a,function(e){console.log(e)})},e};